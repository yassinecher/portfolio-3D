System.register([],function(M){"use strict";return{execute:function(){M("atom",R);let N=0;function R(r,u){const h=`atom${++N}`,v={toString:()=>h};return typeof r=="function"?v.read=r:(v.init=r,v.read=T,v.write=U),u&&(v.write=u),v}function T(r){return r(this)}function U(r,u,h){return u(this,typeof h=="function"?h(r(this)):h)}const b=(r,u)=>r.unstable_is?r.unstable_is(u):u===r,D=r=>"init"in r,O=r=>!!r.write,m=new WeakMap,V=(r,u)=>{m.set(r,u),r.catch(()=>{}).finally(()=>m.delete(r))},_=(r,u)=>{const h=m.get(r);h&&(m.delete(r),h(u))},C=(r,u)=>{r.status="fulfilled",r.value=u},q=(r,u)=>{r.status="rejected",r.reason=u},$=r=>typeof(r==null?void 0:r.then)=="function",E=(r,u)=>!!r&&"v"in r&&"v"in u&&Object.is(r.v,u.v),B=(r,u)=>!!r&&"e"in r&&"e"in u&&Object.is(r.e,u.e),p=r=>!!r&&"v"in r&&r.v instanceof Promise,x=(r,u)=>"v"in r&&"v"in u&&r.v.orig&&r.v.orig===u.v.orig,y=r=>{if("e"in r)throw r.e;return r.v},K=M("createStore",()=>{const r=new WeakMap,u=new WeakMap,h=[],v=new WeakMap,w=t=>r.get(t),F=(t,s)=>{s.d.forEach((a,e)=>{var n;if(!v.has(e)){const c=w(e);(n=h[h.length-1])==null||n.add(e),v.set(e,[c,new Set]),c&&F(e,c)}v.get(e)[1].add(t)})},G=(t,s)=>{var a;const e=w(t);if(r.set(t,s),v.has(t)||((a=h[h.length-1])==null||a.add(t),v.set(t,[e,new Set]),F(t,s)),p(e)){const n="v"in s?s.v instanceof Promise?s.v:Promise.resolve(s.v):Promise.reject(s.e);e.v!==n&&_(e.v,n)}},H=(t,s,a,e)=>{const n=new Map(e?s.d:null);let c=!1;a.forEach((o,i)=>{!o&&b(t,i)&&(o=s),o&&(n.set(i,o),s.d.get(i)!==o&&(c=!0))}),(c||s.d.size!==n.size)&&(s.d=n)},z=(t,s,a,e)=>{const n=w(t),c={d:(n==null?void 0:n.d)||new Map,v:s};if(a&&H(t,c,a,e),E(n,c)&&n.d===c.d)return n;if(p(n)&&p(c)&&x(n,c)){if(n.d===c.d)return n;c.v=n.v}return G(t,c),c},I=(t,s,a,e)=>{if($(s)){let n;const c=()=>{const i=w(t);if(!p(i)||i.v!==o)return;const f=z(t,o,a);u.has(t)&&i.d!==f.d&&L(t,f,i.d)},o=new Promise((i,f)=>{let l=!1;s.then(d=>{l||(l=!0,C(o,d),i(d),c())},d=>{l||(l=!0,q(o,d),f(d),c())}),n=d=>{l||(l=!0,d.then(g=>C(o,g),g=>q(o,g)),i(d))}});return o.orig=s,o.status="pending",V(o,i=>{i&&n(i),e==null||e()}),z(t,o,a,!0)}return z(t,s,a)},Q=(t,s,a)=>{const e=w(t),n={d:(e==null?void 0:e.d)||new Map,e:s};return a&&H(t,n,a),B(e,n)&&e.d===n.d?e:(G(t,n),n)},S=(t,s)=>{const a=w(t);if(!s&&a&&(u.has(t)||Array.from(a.d).every(([l,d])=>{if(l===t)return!0;const g=S(l);return g===d||E(g,d)})))return a;const e=new Map;let n=!0;const c=l=>{if(b(t,l)){const g=w(l);if(g)return e.set(l,g),y(g);if(D(l))return e.set(l,void 0),l.init;throw new Error("no atom init")}const d=S(l);return e.set(l,d),y(d)};let o,i;const f={get signal(){return o||(o=new AbortController),o.signal},get setSelf(){return!i&&O(t)&&(i=(...l)=>{if(!n)return P(t,...l)}),i}};try{const l=t.read(c,f);return I(t,l,e,()=>o==null?void 0:o.abort())}catch(l){return Q(t,l,e)}finally{n=!1}},X=t=>y(S(t)),Y=t=>{const s=o=>{var i,f;const l=new Set((i=u.get(o))==null?void 0:i.t);return(f=v.get(o))==null||f[1].forEach(d=>{l.add(d)}),l},a=new Array,e=new Set,n=o=>{if(!e.has(o)){e.add(o);for(const i of s(o))o!==i&&n(i);a.push(o)}};n(t);const c=new Set([t]);for(let o=a.length-1;o>=0;--o){const i=a[o],f=w(i);if(!f)continue;let l=!1;for(const d of f.d.keys())if(d!==i&&c.has(d)){l=!0;break}if(l){const d=S(i,!0);E(f,d)||c.add(i)}}},J=(t,...s)=>{const a=n=>y(S(n)),e=(n,...c)=>{const o=h.length>0;o||h.push(new Set([n]));let i;if(b(t,n)){if(!D(n))throw new Error("atom not writable");const f=w(n),l=I(n,c[0]);E(f,l)||Y(n)}else i=J(n,...c);return o||A(h.pop()),i};return t.write(a,e,...s)},P=(t,...s)=>{h.push(new Set([t]));const a=J(t,...s);return A(h.pop()),a},j=(t,s,a)=>{var e;const n=u.get(t);if(n)return s&&n.t.add(s),n;const c=a||[];(e=w(t))==null||e.d.forEach((i,f)=>{f!==t&&j(f,t,c)}),S(t);const o={t:new Set(s&&[s]),l:new Set};if(u.set(t,o),O(t)&&t.onMount){const{onMount:i}=t;c.push(()=>{const f=i((...l)=>P(t,...l));f&&(o.u=f)})}return a||c.forEach(i=>i()),o},Z=(t,s)=>!s.l.size&&(!s.t.size||s.t.size===1&&s.t.has(t)),W=(t,s)=>{if(!Z(t,s))return;const a=s.u;a&&a(),u.delete(t);const e=w(t);e&&(p(e)&&_(e.v),e.d.forEach((n,c)=>{if(c!==t){const o=u.get(c);o&&(o.t.delete(t),W(c,o))}}))},L=(t,s,a)=>{const e=new Set(s.d.keys()),n=new Set;a==null||a.forEach((c,o)=>{if(e.has(o)){e.delete(o);return}n.add(o);const i=u.get(o);i&&i.t.delete(t)}),e.forEach(c=>{j(c,t)}),n.forEach(c=>{const o=u.get(c);o&&W(c,o)})},A=t=>{const s=[],a=e=>{var n;if(!v.has(e))return;const[c,o]=v.get(e);v.delete(e),s.push([e,c]),o.forEach(a),(n=w(e))==null||n.d.forEach((i,f)=>a(f))};t.forEach(a),s.forEach(([e,n])=>{const c=w(e);if(c&&c!==n){const o=u.get(e);o&&c.d!==(n==null?void 0:n.d)&&L(e,c,n==null?void 0:n.d),o&&!(!p(n)&&(E(n,c)||B(n,c)))&&o.l.forEach(i=>i())}})};return{get:X,set:P,sub:(t,s)=>{const a=j(t);A([t]);const e=a.l;return e.add(s),()=>{e.delete(s),W(t,a)}}}});let k;const tt=M("getDefaultStore",()=>(k||(k=K()),k))}}});
